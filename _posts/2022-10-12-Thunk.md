---
layout: single
title: "[react] Thunk"
categories: react
tags: react
toc: true
sidebar:
  nav: "docs"
---

ThunkëŠ” ë¹„ë™ê¸° ì‘ì—…ì´ í•„ìš”í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ë¯¸ë“¤ì›¨ì–´ ê¸°ëŠ¥ì´ë‹¤. ğŸ“•

ğŸ“Œ ê³µì‹ë¬¸ì„œ : https://redux-toolkit.js.org/api/createAsyncThunk



#### ë¯¸ë“¤ì›¨ì–´

---

ì£¼ë¡œ ë¹„ë™ê¸° API ê´€ë ¨ ì‘ì—… ì‹œ ì‚¬ìš©ëœë‹¤. Reduxì—ì„œëŠ” Actionê³¼ Reducer ì¤‘ê°„ì— ë¹„ë™ê¸° ì‘ì—…ì´ í•„ìš”í•  ë•Œ ë¯¸ë“¤ì›¨ì–´ë¥¼ ë¶€ì°©í•˜ì—¬ ì§„í–‰í•œë‹¤.

![image-20221012182133609](\images\2022-10-12-Thunk\image-20221012182133609.png)



#### Thunk

---

Reduxì—ì„œ ë§ì´ ì‚¬ìš©í•˜ëŠ” ë¯¸ë“¤ì›¨ì–´ ì¤‘ í•˜ë‚˜ì´ë‹¤. ì§€ê¸ˆê¹Œì§€ëŠ” dispatchì˜ ë§¤ê°œë³€ìˆ˜ë¡œ action ê°ì²´ë¥¼ ì‚¬ìš©í–ˆìœ¼ë‚˜, ì´ë¥¼ í•¨ìˆ˜ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•˜ì—¬ redux actionì´ ì‹¤í–‰ë˜ê¸° ì „ì— ìš°ë¦¬ê°€ ì›í•˜ëŠ” ì‘ì—…ì„ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤. ì´ ë•Œ ì¤‘ê°„ì— ì¶”ê°€ë˜ëŠ” í•¨ìˆ˜ë¥¼ thunk í•¨ìˆ˜ë¼ê³  í•œë‹¤.



#### ì‚¬ìš©í•˜ê¸° : ê¸°ë³¸

---

- ì„¤ì¹˜í•˜ê¸°

  ```bash
  yarn add @reduxjs/toolkit
  ```



- thunk í•¨ìˆ˜ ë§Œë“¤ê¸°

  ```javascript
  import { createSlice, createAsyncThunk } from '@reduxjs/toolkit'
  
  export const __THUNK_NAME = createAsyncThunk(
      'MODULE_NAME/ACTION_VALUE', 
      (payload, thunkAPI) => {
          // ì‹¤í–‰í•˜ê³ ìí•˜ëŠ” ë‚´ìš© ( ì£¼ë¡œ ë¹„ë™ê¸° ì‘ì—…ì´ ì—¬ê¸°ì— ë“¤ì–´ê°„ë‹¤. )
      })
  ```

  ë§¤ê°œë³€ìˆ˜ thunkAPIë¥¼ í†µí•´ Thunkì—ì„œ ì œê³µí•˜ëŠ” API ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

  

- reducersì— thunk ë“±ë¡ ë° ë‚´ë³´ë‚´ê¸°

  ```javascript
  const REDUCER_NAME = createSlice({
    name: "MODULE_NAME",
    initialState,
    reducers: { 
        ACTION_VALUE: (state, action) => {
  		// ì‹¤í–‰í•˜ê³ ìí•˜ëŠ” ë‚´ìš©
      },
    },
    extraReducers: { }
  });
  
  export const { ACTION_NAME } = REDUCER_NAME.actions;
  export default REDUCER_NAME.reducer;
  ```

  

- dispatch (thuckí•¨ìˆ˜) ì‹¤í–‰í•˜ê¸°

  ```javascript
  import { useDispatch } from "react-redux";
  import { __THUNK_NAME } from "./redux/modules/REDUCER_NAME";
  
  const COMPONENT_NAME = () => {
  	const dispatch = useDispatch();
  	dispatch(__THUNK_NAME(PAYLOAD));
     
  	return ( );
  };
  
  export default COMPONENT_NAME;
  ```

  

#### ì‚¬ìš©í•˜ê¸° : thunkAPIë¥¼ ì´ìš©í•˜ì—¬ promise status ê°’ì— ë”°ë¥´ëŠ” í˜¸ì¶œ í•¨ìˆ˜ ë§Œë“¤ê¸°

---

- promiseë¥¼ ë°˜í™˜í•˜ëŠ” thunk í•¨ìˆ˜ ë§Œë“¤ê¸°

  ```javascript
  import { createAsyncThunk, createSlice } from "@reduxjs/toolkit";
  
  export const __THUNK_NAME = createAsyncThunk(
    "MODULE_NAME/ACTION_VALUE",
    async (payload, thunkAPI) => {
      try {
          
        // Promiseì˜ statusë¥¼ fulfilledë¡œ returní•œë‹¤. ë§¤ê°œë³€ìˆ˜ëŠ” payloadê°’ìœ¼ë¡œ actionì— ì „ë‹¬ëœë‹¤.
        return thunkAPI.fulfillWithValue();	
      } catch (error) {
          
        // Promiseì˜ statusë¥¼ rejectë¡œ returní•œë‹¤. ë§¤ê°œë³€ìˆ˜ëŠ” payloadê°’ìœ¼ë¡œ actionì— ì „ë‹¬ëœë‹¤.
        return thunkAPI.rejectWithValue();
      }
    }
  );
  ```

  

- extraReducersì— thunk ë“±ë¡ ë° ë‚´ë³´ë‚´ê¸°

  promise statusì— ë”°ë¼ ë‹¤ë¥¸ actionì„ ì‚¬ìš©í• ë•Œì—ëŠ” extraReducersì— ë“±ë¡í•œë‹¤.

  ```javascript
  export const REDUCER_NAME = createSlice({
    name: "MODULE_NAME",
    initialState,
    reducers: {},
    extraReducers: {
      [__THUNK_NAME.pending]: (state, action) => {
        // promiss statusê°€ pendingì¼ ë•Œ ì‹¤í–‰í•˜ê³ ìí•˜ëŠ” ë‚´ìš©
      },
      [__THUNK_NAME.fulfilled]: (state, action) => {
        // promiss statusê°€ fulfilledì¼ ë•Œ ì‹¤í–‰í•˜ê³ ìí•˜ëŠ” ë‚´ìš©
      },
      [__THUNK_NAME.rejected]: (state, action) => {
        // promiss statusê°€ rejectedì¼ ë•Œ ì‹¤í–‰í•˜ê³ ìí•˜ëŠ” ë‚´ìš©
      },
    },
  });
  
  export const {} = REDUCER_NAME.actions;
  export default REDUCER_NAME.reducer;
  ```

  

- dispatch í•¨ìˆ˜ë¥¼ í†µí•´ thunk í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ëŠ” ë°©ì‹ì€ ìœ„ ê¸°ë³¸ ì‚¬ìš© ì˜ˆì œì™€ ë™ì¼í•˜ë‹¤.

  
